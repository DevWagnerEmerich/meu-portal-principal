<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detector de Fatos</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&family=Bebas+Neue&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
        }
        .font-bebas {
            font-family: 'Bebas Neue', cursive;
        }
        .btn-choice {
            transition: all 0.2s ease-in-out;
        }
        .btn-choice:hover {
            transform: scale(1.05);
        }
        .feedback-correct {
            animation: flash-green 0.5s ease;
        }
        .feedback-incorrect {
            animation: flash-red 0.5s ease;
        }
        @keyframes flash-green {
            0%, 100% { background-color: #1f2937; }
            50% { background-color: #10B981; }
        }
        @keyframes flash-red {
            0%, 100% { background-color: #1f2937; }
            50% { background-color: #EF4444; }
        }
        #timer-bar-inner {
            transition: width 0.1s linear;
        }
        .difficulty-btn {
            background-color: #374151; /* gray-700 */
            border: 2px solid transparent;
        }
        .difficulty-btn.selected {
            background-color: #06b6d4; /* cyan-500 */
            color: #111827; /* gray-900 */
            border-color: #ecfdf5; /* teal-50 */
            transform: scale(1.05);
        }
    </style>
</head>
<body class="bg-gray-800 text-white min-h-screen flex items-center justify-center p-4">

    <div id="game-container" class="w-full max-w-xl mx-auto">

        <!-- Tela Inicial -->
        <div id="start-screen" class="text-center bg-gray-900 bg-opacity-70 p-8 rounded-2xl shadow-2xl">
            <h1 class="text-6xl md:text-7xl font-bebas text-cyan-400 mb-4">Detector de Fatos</h1>
            <p class="mb-6 text-lg">Você consegue diferenciar um fato de uma opinião? Classifique as frases o mais rápido que puder!</p>
            
            <div class="mb-8">
                <h3 class="text-2xl font-bebas text-cyan-400 mb-3">Escolha a Dificuldade</h3>
                <div class="flex justify-center gap-2 md:gap-4">
                    <button class="difficulty-btn w-full md:w-auto px-6 py-2 rounded-lg font-bold transition-all" data-difficulty="facil">Fácil</button>
                    <button class="difficulty-btn w-full md:w-auto px-6 py-2 rounded-lg font-bold transition-all selected" data-difficulty="medio">Médio</button>
                    <button class="difficulty-btn w-full md:w-auto px-6 py-2 rounded-lg font-bold transition-all" data-difficulty="dificil">Difícil</button>
                </div>
            </div>

            <button id="start-btn" class="w-full bg-cyan-500 hover:bg-cyan-600 text-gray-900 font-bold py-4 px-12 rounded-lg text-2xl transition-transform transform hover:scale-105 shadow-lg">Começar!</button>
        
            <div class="mt-10">
                <h2 class="text-3xl font-bebas text-cyan-400 mb-3">Ranking</h2>
                <ol id="high-scores-list" class="text-xl text-white list-decimal list-inside text-left max-w-xs mx-auto">
                    <!-- Scores serão populados aqui -->
                </ol>
            </div>
        </div>

        <!-- Tela do Jogo -->
        <div id="game-screen" class="hidden">
            <!-- HUD (Heads-Up Display) -->
            <header class="flex justify-between items-center mb-4">
                <div class="text-2xl font-bold">Pontos: <span id="score">0</span></div>
                <div class="text-2xl font-bold"><span id="statement-number">1</span> / <span id="total-statements">10</span></div>
            </header>
            
            <!-- Timer -->
            <div id="timer-bar" class="w-full bg-gray-600 rounded-full h-4 mb-6 shadow-inner">
                <div id="timer-bar-inner" class="bg-gradient-to-r from-green-400 to-cyan-500 h-4 rounded-full" style="width: 100%;"></div>
            </div>

            <!-- Card da Frase -->
            <main class="bg-gray-700 p-8 rounded-lg shadow-xl text-center mb-6 min-h-[150px] flex items-center justify-center">
                <h2 id="statement-text" class="text-3xl font-bold"></h2>
            </main>

            <!-- Botões de Escolha -->
            <footer class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <button data-choice="fato" class="btn-choice w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-6 px-6 rounded-lg text-3xl shadow-md">
                    FATO
                </button>
                <button data-choice="opiniao" class="btn-choice w-full bg-purple-600 hover:bg-purple-700 text-white font-bold py-6 px-6 rounded-lg text-3xl shadow-md">
                    OPINIÃO
                </button>
            </footer>
        </div>
        
        <!-- Tela Final -->
        <div id="end-screen" class="hidden text-center bg-gray-900 bg-opacity-70 p-8 rounded-2xl shadow-2xl">
            <h2 class="text-6xl font-bebas text-cyan-400 mb-4">Jogo Terminado!</h2>
            <p class="text-3xl mb-2">Sua pontuação final foi:</p>
            <p id="final-score" class="text-7xl font-bold text-yellow-400 mb-8"></p>
            <div class="flex flex-col md:flex-row gap-4 mt-8">
                <button id="restart-btn" class="w-full bg-cyan-500 hover:bg-cyan-600 text-gray-900 font-bold py-4 px-12 rounded-lg text-2xl transition-transform transform hover:scale-105 shadow-lg">Jogar Novamente</button>
                <button id="home-btn" class="w-full bg-gray-600 hover:bg-gray-700 text-white font-bold py-4 px-12 rounded-lg text-2xl transition-transform transform hover:scale-105 shadow-lg">Tela Inicial</button>
            </div>
        </div>

    </div>

    <script>
        // --- ELEMENTOS DO DOM ---
        const startScreen = document.getElementById('start-screen');
        const gameScreen = document.getElementById('game-screen');
        const endScreen = document.getElementById('end-screen');
        const startBtn = document.getElementById('start-btn');
        const restartBtn = document.getElementById('restart-btn');
        const homeBtn = document.getElementById('home-btn');
        
        const scoreEl = document.getElementById('score');
        const statementNumberEl = document.getElementById('statement-number');
        const totalStatementsEl = document.getElementById('total-statements');
        const timerBarInner = document.getElementById('timer-bar-inner');
        const statementTextEl = document.getElementById('statement-text');
        const choiceButtons = document.querySelectorAll('.btn-choice');
        const finalScoreEl = document.getElementById('final-score');
        const highScoresList = document.getElementById('high-scores-list');
        const difficultyBtns = document.querySelectorAll('.difficulty-btn');

        // --- DADOS DO JOGO ---
        const statements = [
            { text: "A água ferve a 100 graus Celsius ao nível do mar.", type: "fato" },
            { text: "Filmes de comédia são os melhores.", type: "opiniao" },
            { text: "O Brasil é o quinto maior país do mundo em área territorial.", type: "fato" },
            { text: "A cor azul transmite mais tranquilidade que o vermelho.", type: "opiniao" },
            { text: "A Terra gira em torno do Sol.", type: "fato" },
            { text: "Aprender a programar é muito difícil.", type: "opiniao" },
            { text: "A Amazônia é a maior floresta tropical do mundo.", type: "fato" },
            { text: "Viajar de avião é mais assustador do que viajar de carro.", type: "opiniao" },
            { text: "O PIX foi criado pelo Banco Central do Brasil.", type: "fato" },
            { text: "Música clássica é relaxante.", type: "opiniao" },
            { text: "O corpo humano adulto tem 206 ossos.", type: "fato" },
            { text: "Pizza é a melhor comida do mundo.", type: "opiniao" },
            { text: "A Mona Lisa foi pintada por Leonardo da Vinci.", type: "fato" },
            { text: "Gatos são melhores animais de estimação do que cachorros.", type: "opiniao" },
            { text: "A vacinação é uma das formas mais eficazes de prevenir doenças.", type: "fato" },
            { text: "Trabalho remoto é mais produtivo que o presencial.", type: "opiniao" },
            { text: "O Monte Everest é a montanha mais alta do mundo.", type: "fato" },
            { text: "É impossível viver sem redes sociais hoje em dia.", type: "opiniao" },
            { text: "O Brasil sediou a Copa do Mundo de 2014.", type: "fato" },
            { text: "O verão é a melhor estação do ano.", type: "opiniao" },
            { text: "Inteligência artificial vai substituir a maioria dos empregos.", type: "opiniao" },
            { text: "A Grande Muralha da China é visível do espaço a olho nu.", type: "fato" }, // Curiosidade: isso é um mito, mas considerado um fato por muitos. Vamos manter como fato no jogo para simplicidade.
            { text: "Filmes de super-heróis estão saturando o cinema.", type: "opiniao" },
            { text: "A expectativa de vida no Japão é uma das mais altas do mundo.", type: "fato" }
        ];
        let shuffledStatements = [];
        const HIGH_SCORES_KEY = 'factDetectorHighScores';
        const difficultyConfig = {
            facil:   { time: 10, questions: 10 },
            medio:   { time: 7,  questions: 15 },
            dificil: { time: 4,  questions: 20 }
        };

        // --- ESTADO DO JOGO ---
        let score = 0;
        let currentStatementIndex = 0;
        let totalStatements = 0;
        let timer;
        let timeLeft;
        let selectedDifficulty = 'medio'; // Dificuldade padrão

        // --- FUNÇÕES DO JOGO ---
        function shuffleArray(array) {
            return [...array].sort(() => Math.random() - 0.5);
        }

        function startGame() {
            score = 0;
            currentStatementIndex = 0;
            totalStatements = difficultyConfig[selectedDifficulty].questions;
            shuffledStatements = shuffleArray(statements).slice(0, totalStatements);
            
            scoreEl.textContent = '0';
            totalStatementsEl.textContent = totalStatements;
            startScreen.classList.add('hidden');
            endScreen.classList.add('hidden');
            gameScreen.classList.remove('hidden');

            nextStatement();
        }

        function nextStatement() {
            if (currentStatementIndex >= totalStatements) {
                endGame();
                return;
            }

            clearInterval(timer);
            timeLeft = difficultyConfig[selectedDifficulty].time;
            updateTimerBar();
            timer = setInterval(updateGame, 100);

            statementTextEl.textContent = shuffledStatements[currentStatementIndex].text;
            statementNumberEl.textContent = currentStatementIndex + 1;
        }

        function updateGame() {
            timeLeft -= 0.1;
            updateTimerBar();

            if (timeLeft <= 0) {
                handleChoice(null);
            }
        }
        
        function updateTimerBar() {
            const timeForStatement = difficultyConfig[selectedDifficulty].time;
            const percentage = (timeLeft / timeForStatement) * 100;
            timerBarInner.style.width = `${percentage}%`;
            
            if (percentage < 25) {
                timerBarInner.className = 'bg-gradient-to-r from-red-500 to-yellow-500 h-4 rounded-full';
            } else if (percentage < 60) {
                timerBarInner.className = 'bg-gradient-to-r from-yellow-400 to-orange-500 h-4 rounded-full';
            } else {
                timerBarInner.className = 'bg-gradient-to-r from-green-400 to-cyan-500 h-4 rounded-full';
            }
        }

        function handleChoice(event) {
            clearInterval(timer);
            const playerChoice = event ? event.currentTarget.dataset.choice : null;
            const correctType = shuffledStatements[currentStatementIndex].type;

            if (playerChoice === correctType) {
                score += 100 + Math.round(timeLeft * 10);
                scoreEl.textContent = score;
                gameScreen.classList.add('feedback-correct');
            } else {
                gameScreen.classList.add('feedback-incorrect');
            }
            
            setTimeout(() => {
                gameScreen.classList.remove('feedback-correct', 'feedback-incorrect');
                currentStatementIndex++;
                nextStatement();
            }, 500);
        }
        
        function endGame() {
            gameScreen.classList.add('hidden');
            endScreen.classList.remove('hidden');
            finalScoreEl.textContent = score;
            updateHighScores(score);
        }
        
        function updateHighScores(newScore) {
            const highScores = JSON.parse(localStorage.getItem(HIGH_SCORES_KEY)) || [];
            highScores.push(newScore);
            highScores.sort((a, b) => b - a);
            const topScores = highScores.slice(0, 3);
            localStorage.setItem(HIGH_SCORES_KEY, JSON.stringify(topScores));
        }

        function displayHighScores() {
            const highScores = JSON.parse(localStorage.getItem(HIGH_SCORES_KEY)) || [];
            highScoresList.innerHTML = '';
            if (highScores.length === 0) {
                highScoresList.innerHTML = '<li class="text-gray-400">Jogue para entrar no ranking!</li>';
            } else {
                highScores.forEach(score => {
                    const li = document.createElement('li');
                    li.textContent = `${score} pontos`;
                    highScoresList.appendChild(li);
                });
            }
        }
        
        function showHomeScreen() {
            endScreen.classList.add('hidden');
            startScreen.classList.remove('hidden');
            displayHighScores();
        }

        function selectDifficulty(event) {
            selectedDifficulty = event.currentTarget.dataset.difficulty;
            difficultyBtns.forEach(btn => {
                btn.classList.remove('selected');
            });
            event.currentTarget.classList.add('selected');
        }

        // --- EVENT LISTENERS ---
        startBtn.addEventListener('click', startGame);
        restartBtn.addEventListener('click', startGame);
        homeBtn.addEventListener('click', showHomeScreen);
        choiceButtons.forEach(button => button.addEventListener('click', handleChoice));
        difficultyBtns.forEach(btn => btn.addEventListener('click', selectDifficulty));

        // --- INICIALIZAÇÃO ---
        displayHighScores();

    </script>
</body>
</html>

